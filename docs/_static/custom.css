/* =========================================================
   IOBEWI — COSMOBEWI (Full Dark neutre élégant)
   RTD-like theme — tout piloté par variables
   ========================================================= */

/* ------------------ Variables globales ------------------ */
:root{
  /* Couleurs — fond & surfaces (dark) */
  --bg:#0f1115;
  --surface:#13161b;
  --surface-2:#171b21;
  --border:#2a2f36;

  /* Texte */
  --ink:#f3f4f6;         /* texte principal : quasi blanc mais pas pur (#f3f4f6 = slate-50/100) */
  --ink-soft:#d1d5db;    /* secondaire : gris clair lisible */
  --ink-muted:#9ca3af;   /* meta/breadcrumbs : plus sombre que avant, mieux visible */

  /* Accents neutres (gris chauds) */
  --accent:#a3a3a3;          /* repère actif (bordure gauche menu) */
  --accent-strong:#ffffff;   /* texte actif/hover */

  /* Code & maths */
  --code-bg:#0f141a;
  --code-inline:#1a1f26;

  /* Tableaux */
  --table-head:#1b2027;
  --table-row:#12161b;

  /* Sidebar */
  --side:#1a1a1d;
  --side-hover:#2b2b31;
  --side-active:#2b2b31;
  --side-border:#2a2a2e;
  --side-text:#e5e7eb;
  --side-text-strong:#ffffff;
  --side-placeholder:#9ca3af;

  /* Focus & sélection */
  --focus:#9ca3af;
  --selection: rgba(148,163,184,.20);

  /* Liens (soulignement) */
  --link-underline-opacity:.35;

  /* Dimensions & layout */
  --content-max:1080px;
  --container-padding: 16px;

  /* Rayon & bordures */
  --radius-sm:4px;
  --radius-md:6px;
  --radius-lg:18px;
  --radius-full:999px;
  --border-w:1px;
  --menu-border-left:3px;

  /* Ombres */
  --shadow-0: none;
  --shadow-1: 0 0 8px rgba(0,0,0,.20);
  --shadow-focus: 0 0 0 3px rgba(148,163,184,.15);

  /* Transitions */
  --ease: cubic-bezier(.2,.6,.2,1);
  --t-fast:.12s;
  --t-med:.20s;

  /* Typographie (échelle légère) */
  --font-ui: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  --font-code: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  --font-accent: 'Nunito','Quicksand', var(--font-ui);

  /* Tailles d’éléments */
  --avatar-size:180px;
  --btn-h:48px;
  --btn-px:20px;
  --btn-fs:16px;

  /* Z-index */
  --z-floating:9000;
}

/* ------------------ Fond global & container -------------- */
html, body, .wy-body-for-nav { background: var(--bg); color: var(--ink); }
.wy-nav-content { max-width: var(--content-max); background: transparent; }

/* ------------------ Contenu (typographie) ---------------- */
.rst-content { color: var(--ink); }
.rst-content p, .rst-content li { color: var(--ink); }
.rst-content strong { color: var(--ink); font-weight: 700; }
.rst-content em { color: var(--ink-soft); }

.rst-content h1, .rst-content h2, .rst-content h3 {
  color: var(--ink);
  letter-spacing: .1px;
  font-family: var(--font-ui);
}
.rst-content h1 { font-weight: 800; margin-top: .4rem; }
.rst-content h2 { font-weight: 700; margin-top: 1.2rem; }
.rst-content h3 { font-weight: 600; }

/* ------------------ Liens ------------------ */
.rst-content a, .rst-content a.reference, .rst-content a.external {
  color: var(--ink-soft);
  text-decoration: underline;
  text-decoration-color: rgba(203,213,225, var(--link-underline-opacity));
  text-underline-offset: 2px;
  transition: color var(--t-med) var(--ease), text-decoration-color var(--t-med) var(--ease);
}
.rst-content a:hover {
  color: var(--accent-strong);
  text-decoration-color: var(--accent-strong);
}

/* ------------------ Breadcrumbs ------------------ */
.wy-breadcrumbs, .wy-breadcrumbs a { color: var(--ink-muted); }
.wy-breadcrumbs a:hover { color: var(--ink); }

/* ------------------ Séparateurs / listes --------------- */
.rst-content hr {
  border: 0;
  height: 1px;
  background: var(--border);
  margin: 1.2rem 0;
}
.rst-content ul>li { margin: .25rem 0; }

/* ------------------ Admonitions (notes/avert.) --------- */
.rst-content .admonition, .rst-content .note, .rst-content .warning {
  background: var(--surface);
  border: var(--border-w) solid var(--border);
  border-left-width: 4px;
  border-radius: var(--radius-md);
}
.rst-content .note, .rst-content .admonition.note   { border-left-color: #a8a29e; } /* gris chaud */
.rst-content .warning, .rst-content .admonition.warning { border-left-color: #f59e0b; } /* doré doux */
.rst-content .admonition p.admonition-title { color: var(--ink); }

/* ------------------ Code ------------------ */
.highlight, .rst-content pre {
  background: var(--code-bg);
  border: var(--border-w) solid var(--border);
  border-radius: var(--radius-md);
  color: var(--ink);
  font-family: var(--font-code);
}
.rst-content code.literal {
  background: var(--code-inline);
  color: var(--ink);
  border: var(--border-w) solid var(--border);
  border-radius: var(--radius-sm);
  padding: .05em .3em;
  font-family: var(--font-code);
}

/* ------------------ Maths ------------------ */
.math, .math .katex { color: var(--ink); font-size: 105%; line-height: 1.35; }
.rst-content .math .katex-display { margin: .8rem 0 1rem; }

/* ------------------ Tableaux ------------------ */
.rst-content table.docutils {
  border: var(--border-w) solid var(--border);
  background: var(--surface);
  border-radius: var(--radius-md);
  overflow: hidden;
}
.rst-content table.docutils th {
  background: var(--table-head);
  color: var(--ink);
  font-weight: 600;
}
.rst-content table.docutils td,
.rst-content table.docutils th { border-color: var(--border); }
.rst-content table.docutils tbody tr:nth-child(odd) { background: var(--table-row); }

/* ------------------ Boutons Prev/Next ------------------ */
.btn{
  border: var(--border-w) solid var(--ink-muted) !important;
  color: var(--ink-muted) !important;
  background: transparent !important;
  transition: background var(--t-med) var(--ease),
              color var(--t-med) var(--ease),
              border-color var(--t-med) var(--ease),
              box-shadow var(--t-med) var(--ease);
  height: var(--btn-h);
  padding: 0 var(--btn-px);
  border-radius: var(--radius-full);
  font-family: var(--font-ui);
  font-size: var(--btn-fs);
}
.btn:hover{
  background: var(--surface-2) !important;
  color: var(--ink) !important;
  border-color: var(--ink) !important;
  box-shadow: var(--shadow-focus);
}

/* ========================================================
   Sidebar sombre
   ======================================================== */
.wy-nav-side{
  background: var(--side) !important;
  border-right: var(--border-w) solid var(--side-border);
  color: var(--side-text);
}

/* Logo avatar (cercle) + wrapper neutre */
.wy-side-nav-search{ background: transparent !important; }
.wy-side-nav-search > a:first-child{
  background: transparent !important;
  padding: 0 !important;
  border: 0 !important;
  box-shadow: var(--shadow-0) !important;
  display: flex;
  justify-content: center;
}
.wy-side-nav-search img{
  display:block;
  width: var(--avatar-size) !important;
  height: var(--avatar-size) !important;
  max-width:none !important;
  object-fit:cover !important;
  border-radius:50% !important;
  overflow:hidden;
  margin:12px auto 10px !important;
  border:2px solid var(--side-border);
  box-shadow: var(--shadow-1);
  transition: transform var(--t-fast) var(--ease);
}
.wy-side-nav-search img:hover{ transform:scale(1.01); }

/* Recherche (dark) */
.wy-side-nav-search input[type="text"]{
  background: var(--side-hover);
  color: var(--side-text);
  border: var(--border-w) solid var(--side-border);
  border-radius: var(--radius-lg);
  padding: 8px 12px;
  box-shadow: var(--shadow-0);
  font-family: var(--font-ui);
}
.wy-side-nav-search input::placeholder{ color: var(--side-placeholder); }

/* Menu (liens / hover / actif) */
.wy-menu-vertical a{
  color: var(--side-text) !important;
  background: transparent !important;
  transition: background var(--t-med) var(--ease), color var(--t-med) var(--ease), border-color var(--t-med) var(--ease);
}
.wy-menu-vertical a:hover{
  background: var(--side-hover) !important;
  color: var(--side-text-strong) !important;
}
.wy-menu-vertical li.current> a,
.wy-menu-vertical li.toctree-l1.current> a{
  background: var(--side-active) !important;
  color: var(--side-text-strong) !important;
  font-weight: 600;
  border-left: var(--menu-border-left) solid var(--accent);
}
.wy-menu-vertical li{ border-color: var(--side-border); }

/* ========================================================
   Footer aligné (dark contenu)
   ======================================================== */
.footer-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:1rem;
  flex-wrap:wrap;
  margin-top:1rem;
  color: var(--ink-muted);
  font-size:90%;
}

.cc-by-footer {
  text-align: right;
}

.cc-by-footer img{ 
  height:22px; 
  width:auto; 
  vertical-align:middle; 
  margin-left:.35em; 
}
@media (max-width:780px){
  .footer-row{ justify-content:center; text-align:center; }
}

/* ------------------ Sélection & focus ------------------ */
::selection{ background: var(--selection); }
a:focus, input:focus, button:focus{
  outline:2px solid var(--focus);
  outline-offset:2px;
}

/* ------------------ Petites retouches ------------------ */
.rst-content .section { background: transparent; } /* évite panneaux clairs inattendus */

/* ========================================================
   Bouton de soutien (Tipeee / Ko-fi / etc.)
   ======================================================== */

/* Conteneur flottant (coin bas gauche par défaut) */
.tipeeechat-container-wrap{
  position: fixed;
  bottom: 76px;
  left: 16px;
  z-index: var(--z-floating) !important;
}

/* Bouton rond + libellé */
.tipeeechat-button{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  height: var(--btn-h);
  padding: 0 var(--btn-px);
  border-radius: var(--radius-full);
  border: var(--border-w) solid #1f2937; /* volontairement distinct: cadre perceptible */
  background: linear-gradient(180deg, #323842, #323842); /* neutre sombre */
  color: #fff;
  cursor: pointer;
  font: 600 var(--btn-fs)/1 var(--font-accent);
  transition: transform var(--t-fast) var(--ease),
              border-color var(--t-med) var(--ease),
              background var(--t-med) var(--ease),
              color var(--t-med) var(--ease),
              box-shadow var(--t-med) var(--ease);
}

/* Lien Tipeee : pas de soulignement, texte blanc dans tous les états */
.tipeeechat-container-wrap .tipeeechat-button,
.tipeeechat-container-wrap .tipeeechat-button:link,
.tipeeechat-container-wrap .tipeeechat-button:visited,
.tipeeechat-container-wrap .tipeeechat-button:hover,
.tipeeechat-container-wrap .tipeeechat-button:focus,
.tipeeechat-container-wrap .tipeeechat-button:active {
  text-decoration: none !important;
  color: #fff !important;
  outline: none !important;
  box-shadow: none;
}

.tipeeechat-button img{
  display:block;
  height: calc(var(--btn-h) - 14px); /* marge visuelle haut/bas */
  width:auto;
}

@media (max-width:480px){
  .tipeeechat-container-wrap{ bottom: 72px; right: 12px; } /* Option A mobile */
  /* ou: left:12px; bottom:128px; (Option B) */
}


/* ======= Alléger la zone principale (contenu) ======= */

/* 1) Nouvelles variables (tu peux les remonter dans :root si tu préfères) */
:root{
  /* Surface du contenu (un ton + clair que --bg) */
  --content-bg: #2b2b31;           /* + clair = plus lisible, - “mastoc” */
  --content-border: #3a3f46;       /* liseré très discret */
  --content-radius: 12px;          /* coins doux */
  --content-shadow: 0 8px 24px rgba(0,0,0,.28);

  /* Rythme du texte (un peu plus aéré) */
  --content-padding-x: 28px;
  --content-padding-y: 24px;
  --leading: 1.65;
}

/* 2) Conteneur principal : créer un “carton” lisible */
.wy-nav-content{
  background: var(--content-bg) !important;
  border: 1px solid var(--content-border);
  border-radius: var(--content-radius);
  padding: var(--content-padding-y) var(--content-padding-x);
  box-shadow: var(--content-shadow);
}

/* 3) Respirations & lisibilité du corps de texte */
.rst-content,
.rst-content p,
.rst-content li{
  line-height: var(--leading);
}

/* 4) Harmoniser les éléments embarqués (code/table/notes) avec la nouvelle surface */
.highlight, .rst-content pre{
  background: color-mix(in srgb, var(--content-bg) 88%, black 12%); /* un poil plus sombre */
}
.rst-content code.literal{
  background: color-mix(in srgb, var(--content-bg) 82%, black 18%);
}
.rst-content table.docutils{
  background: color-mix(in srgb, var(--content-bg) 92%, white 8%);
}
.rst-content table.docutils th{
  background: color-mix(in srgb, var(--content-bg) 80%, black 20%);
}
.rst-content .admonition, .rst-content .note, .rst-content .warning{
  background: color-mix(in srgb, var(--content-bg) 90%, white 10%);
  border-color: var(--content-border);
}

/* 1) Mobile : adoucir la “carte” et éviter les débords */
@media (max-width: 980px){
  .wy-nav-content{
    border-radius: 10px;
    padding: 18px 16px;
    box-shadow: 0 6px 18px rgba(0,0,0,.22);
  }
}

/* 2) Impression : fond neutre et texte lisible */
@media print{
  html, body,
  .wy-body-for-nav,
  .wy-grid-for-nav,
  .wy-nav-content-wrap{ background:#fff !important; }
  .wy-nav-content{
    background:#fff !important;
    border: 1px solid #ddd;
    box-shadow: none;
  }
  .rst-content, .rst-content p, .rst-content li{ color:#111 !important; }
}

/* (Optionnel) Si tu veux vraiment très léger : remonte la luminosité d’un cran */
:root.light-dark{
  --content-bg:#18202b;    /* + clair */
  --content-border:#2a3440;
  --content-shadow: 0 8px 28px rgba(0,0,0,.25);
}


/* ===== Fix Firefox/RTD : fond blanc ===== */

html, body{
  background: var(--bg) !important;
}

/* Couches RTD qui réimposent un fond clair */
.wy-body-for-nav,
.wy-grid-for-nav,
.wy-nav-content-wrap{
  background: var(--bg) !important;
  background-image: none !important;   /* au cas où le thème ajoute un dégradé */
  min-height: 100vh;                   /* évite la “marche” blanche en bas */
}

/* Ta carte de contenu reste sur sa surface */
.wy-nav-content{
  background: var(--content-bg) !important;
  border: 1px solid var(--content-border);
  border-radius: var(--content-radius);
  padding: var(--content-padding-y) var(--content-padding-x);
  box-shadow: var(--content-shadow);
}

/* Optionnel : sécuriser aussi quand RTD met des wrappers internes */
.wy-nav-content .rst-content,
.document{
  background: transparent !important;
}